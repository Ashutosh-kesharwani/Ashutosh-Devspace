<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Interactive Guitar String</title>

<!-- GSAP CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

<style>
/* ===== RESET ===== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* ===== PAGE ===== */
body {
  background: #0b0b0b;
  height: 200vh; /* scroll check */
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding-top: 100px;
  font-family: sans-serif;
}

/* ===== STRING ZONE ===== */
#string-zone {
  width: 100%;
  max-width: 1000px;
  height: 200px;
  cursor: grab;
}

/* IMPORTANT */
#string-zone svg {
  width: 100%;
  height: 100%;
  overflow: visible;
  display: block;
}
</style>
</head>

<body>

<div id="string-zone">
<svg viewBox="0 0 1000 200" preserveAspectRatio="none">
  <defs>
    <linearGradient id="glowGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#14cf93" stop-opacity="0"/>
      <stop offset="50%" stop-color="#14cf93" stop-opacity="1"/>
      <stop offset="100%" stop-color="#14cf93" stop-opacity="0"/>
    </linearGradient>

    <filter id="glow">
      <feGaussianBlur stdDeviation="8" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- GLOW -->
  <path id="glow"
    d="M 0 100 Q 500 100 1000 100"
    stroke="url(#glowGrad)"
    stroke-width="6"
    fill="none"
    filter="url(#glow)"
    opacity="0.7"/>

  <!-- MAIN STRING -->
  <path id="string"
    d="M 0 100 Q 500 100 1000 100"
    stroke="#ffffff"
    stroke-width="2"
    fill="none"/>
</svg>
</div>

<script>
const zone = document.getElementById("string-zone");
const string = document.getElementById("string");
const glow = document.getElementById("glow");

let center = 100;
let current = 100;
let velocity = 0;

const tension = 0.1;
const damping = 0.85;
const maxPull = 70;

function animate() {
  velocity += (center - current) * tension;
  velocity *= damping;
  current += velocity;

  const d = `M 0 100 Q 500 ${current} 1000 100`;
  string.setAttribute("d", d);
  glow.setAttribute("d", d);

  glow.style.opacity = Math.min(1, Math.abs(velocity) / 15);

  requestAnimationFrame(animate);
}
animate();

/* ===== INTERACTION ===== */
zone.addEventListener("mousemove", e => {
  const rect = zone.getBoundingClientRect();
  const y = e.clientY - rect.top;
  current = center + Math.max(-maxPull, Math.min(maxPull, y - center));
});

zone.addEventListener("mouseleave", () => {
  velocity += 20;
});
</script>

</body>
</html>
